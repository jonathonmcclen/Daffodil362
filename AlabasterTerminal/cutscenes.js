// JavaScript Document
var ready_for_input_sound = document.createElement('audio');
ready_for_input_sound.src = "https://cia-9d562a98.s3.us-west-1.amazonaws.com/GameAssets/SoundFX/Daffodil362Ready.wav";

var success_sound = document.createElement('audio');
success_sound.src = 'https://cia-9d562a98.s3.us-west-1.amazonaws.com/GameAssets/SoundFX/Daffodil362SuccessNEW.wav';

var failure_sound = document.createElement('audio');
failure_sound.src = 'https://cia-9d562a98.s3.us-west-1.amazonaws.com/GameAssets/SoundFX/Daffodil362Failure.wav';



function puzzle1Done() {
	
	Success();
	
	//animation starts at 5000ms
	
	function line1(){
		typingAnim("Conecting",2000,"Conected to ChatRoom 15-68370223-23",true);
	};
	
	function line2(){
		
		divider();
	};
	
	setTimeout(line1, 5000);
	setTimeout(line2, 6000);
	
	
	
	function line3(){
		typingAnim("typing",2000,"D:\\User\\Ax7> You think we have a mole?",true);
	};
	
	
	function line4(){
		typingAnim("typing",2000,"D:\\User\\Alabaster>  I think somone is feeding info to the CIA.",true);
	};
	
	function line5(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> There has been minimal movement on there servers... untill today.",true);
	};
	
	function line6(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> and all at once...",true);
	};
	
	function line7(){
		typingAnim("typing",2000,"D:\\User\\Ax7> Who do you think it is?",true);
	};
	
	function line8(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> I too busy with bigger things.",true);
	};
	
	function line9(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Have you seen any thing suspicious?",true);
	};
	
	function line10(){
		typingAnim("typing",2000,"D:\\User\\Ax7> Smith has been...",true);
	};
	
	function line11(){
		typingAnim("typing",2000,"D:\\User\\Ax7> Less invested lately.",true);
	};
	
	function line12(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> wait...",true);
	};
	
	function line13(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Somone else is here.",true);
	};
	
	function line14(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> This comunication has been comprimised.",true);
	};
	
	function line15(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Change chatrooms.",true);
	};
	
	function line16(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> https://12406-13796-93659-37402",true);
	};
	
	function line17(){
		addNewLogItem("comp", "COMUNICATION CLOSED");
	};
	
	function line18(){
		divider();
	};
	
	function line19(){
		addNewLogItem("comp", "Enter IP Address you wish to connect");
		Ready_For_Input();
	};
	
	
	setTimeout(line3, 11000);
	setTimeout(line4, 15000);
	setTimeout(line5, 19000);
	setTimeout(line6, 23000);
	setTimeout(line7, 27000);
	setTimeout(line8, 31000);
	setTimeout(line9, 35000);
	setTimeout(line10, 39000);
	setTimeout(line11, 43000);
	setTimeout(line12, 47000);
	setTimeout(line13, 51000);
	setTimeout(line14, 55000);
	setTimeout(line15, 59000);
	setTimeout(line16, 63000);
	
	setTimeout(line17, 67000);
	setTimeout(line18, 68000);
	setTimeout(line19, 69000);
	
};

function puzzle2Done() {
	
	Success();
	
	//animation starst at 5000ms
	
	function line1(){
		typingAnim("Loacating Chatroom",2000,"ChatRoom 15-68370223-23 Located",true);
	};
	
	function line2(){
		addNewLogItem("comp", "Password protected");
	};
	
	function line3(){
		addNewLogItem("comp", "ENTER Authentication code:");
		Ready_For_Input();
	};
	
	
	setTimeout(line1, 5000);
	setTimeout(line2, 9000);
	setTimeout(line3, 11000);

	
};

function puzzle3Done() {
	
	Success();
	
	//animation starts at 5000ms
	
	function line1(){
		typingAnim("Conecting",2000,"Conected to ChatRoom 15-68370223-23",true);
	};
	
	function line2(){
		
		divider();
	};
	
	setTimeout(line1, 5000);
	setTimeout(line2, 6000);
	
	function line3(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> The C.I.A hot on our tail",true);
	};
	
	function line4(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> After years of ignorance",true);
	};
	
	function line5(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Smith is going to pay for this",true);
	};
	
	function line6(){
		typingAnim("typing",2000,"D:\\User\\Ax7> What should we do?",true);
	};
	
	function line7(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Nothing...",true);
	};
	
	function line8(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> They will be to late to stop us anyway",true);
	};
	
	function line9(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> The plan is already in motion",true);
	};
	
	function line10(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> ENCRYPTED URL: https://40353-36520-23634-27560",true);
	};
	
	function line11(){
		addNewLogItem("comp", "COMUNICATION CLOSED");
	};
	
	function line12(){
		divider();
	};
	
	function line13(){
		addNewLogItem("comp", "Enter IP Address you wish to connect");
		Ready_For_Input();
	};
	
	
	setTimeout(line3, 11000);
	setTimeout(line4, 15000);
	setTimeout(line5, 19000);
	setTimeout(line6, 23000);
	setTimeout(line7, 27000);
	setTimeout(line8, 31000);
	setTimeout(line9, 35000);
	setTimeout(line10, 39000);
	setTimeout(line11, 43000);
	
	setTimeout(line12, 44000);
	setTimeout(line13, 45000);
	
};

function puzzle4Done() {
	
	puzzle2Done();

	
};

function puzzle5Done() {
	
	Success();
	
	//animation starst at 5000ms
	
	function line1(){
		typingAnim("Conecting",2000,"Conected to ChatRoom 15-68370223-23",true);
	};
	
	function line2(){
		
		divider();
	};
	
	setTimeout(line1, 5000);
	setTimeout(line2, 6000);
	
	function line3(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Quick",true);
	};
	
	function line4(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> It wont take him long to find us again",true);
	};
	
	function line5(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> We are too close to let him stop us",true);
	};
	
	function line6(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Hes here already",true);
	};
	
	function line7(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Go to this chat room. I will meet you there.",true);
	};
	
	function line8(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> ENCRYPTED URL: https://66737-26553-26594-46592",true);
	};
	
	function line9(){
		addNewLogItem("comp", "USER @Ax7 DISCONECTED");
	};
	
	function line10(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> You are too close for comfort C.I.A man",true);
	};
	
	function line11(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Do you realy think you have what it takes to catch me?",true);
	};
	
	function line12(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> How long have you been trying already?",true);
	};
	
	function line13(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Best to just give up now.",true);
	};
	
	function line14(){
		addNewLogItem("comp", "ALABASTER DICONECTED");
	};
	
	function line15(){
		addNewLogItem("comp", "CHATROOM CLOSED");
	};
	
	function line16(){
		addNewLogItem("comp", "YOU HAVE BEEN DISCONECTED");
	};
	
	function line17(){
		divider();
	};
	
	function line18(){
		addNewLogItem("comp", "Enter IP Address you wish to connect");
		Ready_For_Input();
	};
	
	
	setTimeout(line3, 11000);
	setTimeout(line4, 15000);
	setTimeout(line5, 19000);
	setTimeout(line6, 23000);
	setTimeout(line7, 27000);
	setTimeout(line8, 31000);
	setTimeout(line9, 35000);
	setTimeout(line10, 39000);
	setTimeout(line11, 43000);
	setTimeout(line12, 47000);
	setTimeout(line13, 51000);
	
	setTimeout(line14, 55000);
	setTimeout(line15, 57000);
	setTimeout(line16, 59000);
	setTimeout(line17, 61000);
	setTimeout(line18, 63000);

};

function puzzle6Done() {
	puzzle2Done();
};

function puzzle2Fail() {
	
	//animation starst at 5000ms
	
	function line1(){
		typingAnim("Conecting",2000,"Conection FAILED",true);
	};
	
	function line2(){
		
		divider();
	};
	
	setTimeout(line1, 5000);
	setTimeout(line2, 6000);
	
	function line3(){
		addNewLogItem("comp", "THIS IS NOT THE AUTHENTICATION CODE FOR THIS CHAT ROOM");
	};
	
	function line4(){
		addNewLogItem("comp", "AUTHENTICATION CODES HAVE 10 DIGITS");
	};
	
	function line5(){
		addNewLogItem("comp", "DOUBLE CHECK YOUR ENTRY AND TRY AGAIN");
	};
	
	function line6(){
		divider();
	};
	
	function line7(){
		addNewLogItem("comp", "ENTER Authentication code:");
		Ready_For_Input();
	};
	
	
	setTimeout(line3, 11000);
	setTimeout(line4, 13000);
	setTimeout(line5, 15000);
	setTimeout(line6, 16000);
	setTimeout(line7, 17000);

	
};

function puzzle7Done() {
	
	Success();
	
	//animation starst at 5000ms
	
	function line1(){
		typingAnim("Conecting",2000,"Conected to ChatRoom 15-68370223-23",true);
	};
	
	function line2(){
		
		divider();
	};
	
	setTimeout(line1, 5000);
	setTimeout(line2, 6000);
	
	function line3(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Now go. Ive left clues for you to find me.",true);
	};
	
	function line4(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Oh... Look who's here",true);
	};
	
	function line5(){
		addNewLogItem("comp", "USER @Ax7 DISCONECTED");
	};
	
	function line6(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> That took you longer than I expected",true);
	};
	
	function line7(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Maybe I dont need to worry at all",true);
	};
	
	function line8(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> I waiger my deciple can find me hours before you do.",true);
	};
	
	function line9(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> by that time it will be too late for you to do anything.",true);
	};
	
	function line10(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Except watch it all crumble",true);
	};
	
	function line11(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> Alright... I grow tired of this",true);
	};
	
	function line12(){
		typingAnim("typing",2000,"D:\\User\\Alabaster> ENCRYPTED URL: https://20693-10782-40621-12479",true);
	};
	
	function line13(){
		addNewLogItem("comp", "Alabaster Disconected");
	};
	
	function line14(){
		addNewLogItem("comp", "DISCONECTED. ALL CHATROOMS CLOSED");
	};
	
	function line15(){
		divider();
	};
	
	function line16(){
		addNewLogItem("comp", "LOGIN");
	};
	
	function line17(){
		addNewLogItem("comp", "PLEASE ENTER USERNAME, THEN PRESS ENTER");
		Ready_For_Input();
	};
	
	setTimeout(line3, 11000);
	setTimeout(line4, 15000);
	setTimeout(line5, 19000);
	setTimeout(line6, 20000);
	setTimeout(line7, 24000);
	setTimeout(line8, 28000);
	setTimeout(line9, 32000);
	setTimeout(line10, 36000);
	setTimeout(line11, 40000);
	setTimeout(line12, 44000);
	setTimeout(line13, 48000);
	setTimeout(line14, 50000);
	setTimeout(line15, 52000);
	setTimeout(line16, 54000);
	setTimeout(line17, 56000);
};

function puzzle8Done() {
	
	Success();
	
	//animation starst at 5000ms
	
	function line1(){
		typingAnim("Conecting",2000,"Conected",true);
	};
	
	function line2(){
		
		divider();
	};
	
	function line3(){
		addNewLogItem("comp", "Username DontForgetAgain Recognized");
	};
	
	function line4(){
		addNewLogItem("comp", "PLEASE ENTER PASSWORD");
		Ready_For_Input();
	};

	
	setTimeout(line1, 5000);
	setTimeout(line2, 6000);
	setTimeout(line3, 11000);
	setTimeout(line4, 14000);
};

function puzzle9Done() {
	
	Success();
	
	//animation starst at 5000ms
	
	function line1(){
		typingAnim("Logging In",2000,"Logged In",true);
	};
	
	function line2(){
		addNewLogItem("comp", "Welcome DontForgetAgain");
	};
	
	function line3(){
		addNewLogItem("comp", "INBOX:");
	};
	
	function line4(){
		addNewLogItem("comp", "Message 1: Phone Code: 712");
	};
	
	function line5(){
		addNewLogItem("comp", "Message 2: https://10109-37583-28534-49452");
	};
	
	function line6(){
		divider();
	};
	
	setTimeout(line1, 5000);
	setTimeout(line2, 9000);
	setTimeout(line3, 11000);
	setTimeout(line4, 13000);
	setTimeout(line5, 15000);
	setTimeout(line6, 17000);

};




function Success(){
	
	
	function line1(){
		addNewLogItem("comp", "Command Submission " + "\"" + playerTXT + "\"" + " recognized");
		success_sound.play();
	};
	
	function line2(){
		divider();
	};
	
	setTimeout(line1, 1000);
	setTimeout(line2, 3000);
};

function divider() {
	addNewLogItem("", "..........................................................");
};

function incorrectSub() {
	addNewLogItem("comp", "Command Submission " + "\"" + playerTXT + "\"" + " NOT recognized");
	failure_sound.play();
};

function Ready_For_Input(){
	inputAllowed = true;
	ready_for_input_sound.play();
};

function typingAnim(type, durationInMilliseconds,EndType,Keep) {
	var typing_log_item = document.createElement("h2");
	typing_log_item.className = "log-item";
	typing_log_item.innerHTML = type;
	document.getElementById("log").appendChild(typing_log_item);
	window.scrollTo(0, document.body.scrollHeight || document.documentElement.scrollHeight);

	var currentTime = 0,
		intervalHandle = null,
		timeoutHandle1 = null,
		timeoutHandle2 = null,
		timeoutHandle3 = null;

	function stopAnimationIfTimeExceeded () {
		if (currentTime >= durationInMilliseconds) {
			clearTimeout(timeoutHandle1);
			clearTimeout(timeoutHandle2);
			clearTimeout(timeoutHandle3);
			clearInterval(intervalHandle);
			
			if(Keep){
				typing_log_item.innerHTML = EndType;
			} else {
				typing_log_item.remove();
			}
			
			return true;
		}
		return false;
	}

	function playAnim() {
		var isExceeded = stopAnimationIfTimeExceeded();
		if (isExceeded) {
			return;
		}
		
		typing_log_item.innerHTML = type;
		
		timeoutHandle1 = setTimeout(() => {
			currentTime += 400;
			typing_log_item.innerHTML = type + ".";
		}, 400);

		timeoutHandle2 = setTimeout(() => {
			currentTime += 400;
			typing_log_item.innerHTML = type + "..";
		}, 800);

		timeoutHandle3 = setTimeout(() => {
			currentTime += 400;
			typing_log_item.innerHTML = type + "...";
		}, 1200);
	}
	
	playAnim();
	intervalHandle = setInterval(function() {
		currentTime += 400;
		playAnim();
	}, 1600);

	return typing_log_item;
}
